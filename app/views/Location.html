
<link href="css/settingmenu.css" rel="stylesheet" />
<style>
    .cd-top.cd-is-visible {
        visibility: visible;
        opacity: 0.7;
    }

    .cd-top {
        height: 47px;
        width: 47px;
        color: #fff !important;
        background: #b39a99;
        position: fixed;
        left: 25px;
        bottom: 25px;
        border-radius: 100%;
        z-index: 100;
        font-size: 25px;
        padding-left: 12px;
        padding-top: 4px;
        opacity: 1;
        visibility: hidden;
    }
</style>

<style>
    .text.btn-warning {
        height: 35px;
        width: 35px;
        line-height: 35px;
        border-radius: 100%;
        padding: 0px;
        text-align: center;
    }

    .list-group-item {
        background-color: #e2e2e2;
    }

    .list-group-item {
        padding: 12px !important;
        border: transparent;
        border-bottom: 2px solid #d8d8d8;
        border-left: 3px solid #2196F3;
    }

        .list-group-item a {
            font-size: 17px;
        }
    .text {
        overflow: hidden;
        text-overflow: ellipsis;
        display: -webkit-inline-box;
        -webkit-line-clamp: 1;
        -webkit-box-orient: vertical;
        word-break: break-all;
        margin-bottom: 0;
        font-size: 17px;
    }

    .left-border {
        border-left: 3px solid #FF4081;
    }
</style>


<div class="title-header">
    <div class="row">
        <div class="col-xs-12">
            <h4 class="titletext">Locations <small>{{currentrecord}} of {{totalrecords}} <span ng-if="totalrecords<1">record</span> <span ng-if="totalrecords>1">records</span>  shown</small> </h4>
        </div>
    </div>
</div>

<a href="#/setting" class="newbackbtn"> <i class="fa fa-arrow-left"></i> </a>

<a ng-if="mode == 1 && IsActiveLocationLibrary==true" ng-click="addlocation()" class="btn btn-danger waves-effect roundbtntitle"> <i class="fa fa-plus"></i> </a>
<a ng-if="IsActiveLocationLibrary==false" ng-click="locked()" class="btn btn-danger waves-effect roundbtntitle"> <i class="fa fa-lock"></i> </a>
<a ng-if="mode == 2 || mode == 3 " ng-click="leaveform()" class="btn btn-danger waves-effect roundbtntitle"> <i class="fa fa-times"></i> </a>

<div class="top50">

    <div ng-show="mode == 1" class="listview animated zoomIn" id="mylist">
        <div ng-if="loadingblock==true" style="background:#ECECEC; text-align:center; margin-top:-5px; padding-top:12px; padding-bottom:12px;">
            <img style="height:30px;" src="img/loader.gif" alt="Alternate Text">
        </div>

        <div id="sticky-anchor"></div>
        <div id="sticky" class="topup">
            <table class="searchtable">
                <tbody>
                    <tr>

                        <td>


                            <div class="input-group">



                                <div style="position:relative" class="fg-line">


                                    <input style="border-radius:0px;" id="MasterSearch" type="text" ng-model="SearchData.SearchValue" class="form-control" placeholder="Type location to Search">


                                    <i></i>
                                </div>
                                <i ng-if="SearchData.SearchValue!=''" id="btnClearSearchNew" ng-click="ClearFilter()" class="fa right47 filtercross fa-times"></i>

                                <a class="input-group-addon last textData" style="margin-top: 0px;  width: 37px;" id="btnMasterSearch" ng-click="GetLocations()"><i class="fa fa-search" style="font-size:20px;"></i> </a>
                            </div>


                        </td>
                        <td></td>
                        <td></td>
                    </tr>
                </tbody>
            </table>
        </div>
        <div ng-if="LocationsLoaded==false">

            <div class="modal-backdrop fade in"></div>
            <div class="spinner" style="text-align:center; position:fixed; top:33%; width:100%;  z-index:10000">
                <img src="img/loader.gif" alt="Alternate Text" />

                <!--<i style="font-size: 100px; color: #0083C7; " class="fa fa-spin fa-spinner"></i>-->
            </div>
        </div>


        <ul class="list-group">
            <li id="Dlt_{{obj.LocationID}}" ng-class="{'left-border': $index % 2 === 0 }" class="list-group-item" ng-repeat="obj in Locations" ng-if="obj.LocationName != ''">

                <div class="row">
                    <div class="col-xs-2">
                        <a class="btn text btn-warning">{{$index+1}}</a>
                    </div>

                    <div class="col-xs-5">
                        <a class="text">{{obj.LocationName}}</a>
                        <br />
                        <a class="text" style="font-size: 12px; color: #a69a9a;"><span ng-if="GetTrimmedStringLoc(obj.LocationDescription)!=''">{{obj.LocationDescription}} </span><span ng-if="GetTrimmedStringLoc(obj.LocationZone)!=''">{{obj.LocationZone}}</span></a>

                    </div>

                    <div class="col-xs-5" ng-if="IsActiveLocationLibrary==true">
                        <a ng-click="deletelocation(obj)" id="Delete_{{obj.LocationID}}" style="height:40px; width:40px; padding:0px; line-height:40px; border-radius:0px;" class="btn btn-danger pull-right">
                            <i class="fa fa-trash-o"></i>
                        </a>
                        <a ng-click="editlocation(obj)" style="height:40px; width:40px; padding:0px; line-height:40px; border-radius:0px;" class="btn btn-warning pull-right">
                            <i class="fa fa-pencil"></i>
                        </a>
                    </div>

                    <div class="col-xs-5" ng-if="IsActiveLocationLibrary==false">
                        <a id="Delete_{{obj.LocationID}}" ng-click="locked()" style="height:40px; width:40px; padding:0px; line-height:40px; border-radius:0px;" class="btn btn-danger pull-right">
                            <i class="fa fa-lock"></i>
                        </a>
                        <a ng-click="locked()" style="height:40px; width:40px; padding:0px; line-height:40px; border-radius:0px;" class="btn btn-warning pull-right">
                            <i class="fa fa-lock"></i>
                        </a>
                    </div>
                </div>




            </li>
        </ul>

        <div style="text-align: center; color: #d9534f; display:none;" class="maincontent norecords">

            <div ng-if="ActualTotalRecords!=0 && LocationsLoaded==true">

                <h3>No record matched your Query</h3>
                <a style="cursor:pointer;width:auto;" class="btn btn-primary" ng-click="ClearFilter()"> <i class="fa fa-filter"></i> Clear your filters</a>
                <br /><br />
            </div>
            <div style="position:relative; z-index:100000;" ng-if="ActualTotalRecords==0">
                <br />
                <h5>You don't have any location records yet. Click the "Add location".</h5>
                <br />
            </div>

        </div>


    </div>


    <div class="animated zoomIn" ng-if="mode == 2 || mode == 3 ">

        <form name="locationform">

            <div style="background:#fff;padding:10px; margin-top:7px;">

                <div class="row">
                    <div class="col-md-12">
                        <h4 ng-if="mode == 2">Fill below value to add new</h4>
                        <h4 ng-if="mode == 3">Update below value to update Location</h4>
                    </div>
                </div>


                <div class="form-group">
                    <label>Location <span>*</span></label>
                    <input id="loc" class="form-control" type="text" ng-model="locationdata.LocationName" required />
                </div>

                <div class="form-group">
                    <label>Location Group</label>
                    <input class="form-control" type="text" ng-model="locationdata.LocationZone" />
                </div>

                <div class="form-group">
                    <label>Description</label>
                    <input class="form-control" type="text" ng-model="locationdata.LocationDescription" />
                </div>

                <div ng-if="mode == 2" class="form-group">
                    <input ng-model="check" ng-change="keepformopen(check)" type="checkbox" ng-true-value="true" ng-false-value="false" id="test1" />
                    <label for="test1">Keep form open</label>
                </div>


                <button type="button" ng-disabled="locationform.$invalid || IsProcessing==true" ng-click="savelocation()" ng-if="mode == 2" class="btn btn-primary"> <i class="fa fa-plus-circle" ng-class="{'fa-spin':IsProcessing==true}"></i> Add</button>
                <button type="button" ng-disabled="locationform.$invalid || IsProcessing==true" ng-click="savelocation()" ng-if="mode == 3" class="btn btn-primary"> <i class="fa fa-pencil" ng-class="{'fa-spin':IsProcessing==true}"></i> Update</button>
                <a ng-click="leaveform()" class="btn btn-gray"> <i class="fa fa-times"></i> Cancel</a>
            </div>

        </form>



    </div>

    <br /><br />
</div>
<a ng-show="mode == 1"  class="cd-top" onclick="scrollToTop()" title="Go to top"><i class="fa fa-arrow-up"></i></a>
 <a ng-click="Openbottommenu()" class="menubtn waves-effect btn-info">
    <i class="fa fa-bars"></i>
</a>

<div id="bottommenumodal" class="modal bottommenu fade">
    <div class="modal-body">
        <ul class="animated slideInUp selectAction">

            
            <li ng-if="IsActiveLocationLibrary==true"> <a ng-click="LockOrUnlockLibrary(false,1)"><span class="newinv">Lock Library</span></a>  <a ng-click="LockOrUnlockLibrary(false,1)" class=" waves-effect btn-danger btn"> <i class="fa fa-lock"></i> </a></li>
            <li ng-if="IsActiveLocationLibrary==false"> <a ng-click="LockOrUnlockLibrary(true,1)"><span class="newinv">Unlock Library</span></a>  <a ng-click="LockOrUnlockLibrary(true,1)" class=" waves-effect btn-danger btn"> <i class="fa fa-unlock"></i> </a></li>
            <li ng-if="checkpermission('ACTION:CanAddInventory')==true"> <a href="#/inventory"><span class="newinv">Add Inventory</span></a>  <a href="#/inventory" class=" waves-effect btn-warning btn"> <i class="fa fa-plus"></i> </a></li>
            <li ng-if="checkpermission('URL:Manage/UnitOfMeasure')==true"> <a href="#/uom"><span class="newinv">Manage UOM</span></a>  <a href="#/uom" class=" waves-effect btn-success btn"> <i class="fa fa-cog"></i> </a></li>
            <li ng-if="checkpermission('URL:Manage/Status')==true"> <a href="#/status"><span class="newinv">Manage status</span></a>  <a href="#/status" class=" waves-effect btn-primary btn"> <i class="fa fa-check-circle-o"></i> </a></li>
            <li class="bottomlink"><span data-dismiss="modal">Close</span><a style="background:#bbb !important;" class=" waves-effect btn-primary btn decrease" data-dismiss="modal"> <i class="fa fa-times"></i>  </a></li>
        </ul>
    </div>
</div>
<script>

    var offset = 50;
    //browser window scroll (in pixels) after which the "back to top" link opacity is reduced
    var offset_opacity = 1200;
    //duration of the top scrolling animation (in ms)
    var scroll_top_duration = 700;
    //grab the "back to top" link
    var $back_to_top = $('.cd-top');

    function scrollToTop() {

        $('html, body').animate({ scrollTop: 0 }, 500, 'linear');
    }



    $(window).scroll(function () {
        ($(this).scrollTop() > offset) ? $back_to_top.addClass('cd-is-visible') : $back_to_top.removeClass('cd-is-visible cd-fade-out');
        if ($(this).scrollTop() > offset_opacity) {
            $back_to_top.addClass('cd-fade-out');
        }
    });
</script>